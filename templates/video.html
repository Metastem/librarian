<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="thumbnail" content={{.video.ThumbnailUrl}}>
  <meta name="description" content={{.video.Description}}>

  <meta property="og:site_name" content="Librarian">
  <meta property="og:url" content={{.video.Url}}>
  <meta property="og:title" content={{.video.Title}}>
  <meta property="og:image" content={{.video.ThumbnailUrl}}>
  <meta property="og:description" content={{.video.Description}}>
  <meta property="og:type" content="video.other">

  <meta name="twitter:card" content="player">
  <meta name="twitter:url" content={{.video.Url}}>
  <meta name="twitter:title" content={{.video.Title}}>
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content={{.video.ThumbnailUrl}}>

  <link rel="stylesheet" href="/static/css/plyr.css" />
  <link rel="stylesheet" href="/static/css/video.css" />
  <link rel="stylesheet" href="/static/fonts/roboto.css" />
  <link rel="stylesheet" href="/static/fonts/Material-Icons-Outlined.css" />

  <title>{{.video.Title}} - Librarian</title>
</head>

<body>
  <header>
    <a href="/">
      <h2>LIBRARIAN</h2>
    </a>
    <form action="/search">
      <input type="text" placeholder="Search..." />
      <input type="submit" value="Search" />
    </form>
  </header>

  <br>

  <main>
    <div class="videoWrapper">
      <video id="player" class="videoPlayer" poster={{.video.ThumbnailUrl}} controls=true width="1280" height="720">
        <source type="video/mp4" src="{{.stream}}">
      </video>
    </div>
    <div>
      <h2>{{.video.Title}}</h2>

      <div class="videoMetaWrapper">
        <div class="videoMeta">
          <a href="{{.video.OdyseeUrl}}">Watch on Odysee</a>
          <br><br>
          <!--soonTM
            <a>Switch Librarian Instance</a>
            <a>Embed Link</a>
          -->
          <a href="{{.stream}}">
            <button>Download</button>
          </a>
          <br>
          <p><span class="material-icons-outlined">visibility</span> {{.video.Views}}</p>
          <p><span class="material-icons-outlined">thumb_up</span> {{.video.Likes}}</p>
          <p><span class="material-icons-outlined">thumb_down</span> {{.video.Dislikes}}</p>
          <p>License: {{.video.License}}</p>
        </div>

        <div class="videoDesc">
          <div class="channel">
            <a href="{{.video.Channel.Url}}" class="pfpWrapper">
              {{if .video.Channel.Thumbnail}}
              <img src="{{.video.Channel.Thumbnail}}" class="pfp" width="56" height="56" />
              {{else}}
              <img src="https://odysee.com/public/img/spaceman.png" class="pfp defaultPfp" width="56" height="56" />
              {{end}}
            </a>
            <a href="{{.video.Channel.Url}}">
              <p>
                {{if .video.Channel.Title}}
                <b>{{.video.Channel.Title}}</b>
                <br>
                {{.video.Channel.Name}}
                {{else}}
                <b>{{.video.Channel.Name}}</b>
                {{end}}
              </p>
            </a>
          </div>
          <p><b>Shared {{.video.Date}}</b></p>
          <p>{{.video.Description}}</p>
        </div>
      </div>

      <h2>Comments ({{.commentsLength}})</h2>

      <div>
        {{range $index, $value := .comments}}
        <div class="comment">
          {{if $value.Channel.Thumbnail}}
          <img src="{{$value.Channel.Thumbnail}}" class="pfp" width="56" height="56" />
          {{else}}
          <img src="https://odysee.com/public/img/spaceman.png" class="pfp defaultPfp" width="56" height="56" />
          {{end}}
          <div>
            <a href="{{$value.Channel.Url}}">
              <p>
                {{if $value.Channel.Title}}
                <b>{{$value.Channel.Title}}</b>
                <br>
                {{$value.Channel.Name}}
                {{else}}
                <b>{{$value.Channel.Name}}</b>
                {{end}}
              </p>
            </a>
            <p>{{$value.Comment}}</p>

            {{if eq $value.RelTime "a long while ago"}}
            <p>
              {{$value.Time}} |
              <span class="material-icons-outlined">thumb_up</span> {{$value.Likes}}
              <span class="material-icons-outlined">thumb_down</span> {{$value.Dislikes}}
            </p>
            {{else}}
            <p title="{{$value.Time}}">
              {{$value.RelTime}} |
              <span class="material-icons-outlined">thumb_up</span> {{$value.Likes}}
              <span class="material-icons-outlined">thumb_down</span> {{$value.Dislikes}}
            </p>
            {{end}}
          </div>
        </div>
        {{end}}
      </div>
    </div>
  </main>

  <script src="/static/js/plyr.js"></script>
  <script>
    const player = new Plyr('#player');
  </script>
</body>

</html>