<!DOCTYPE html>
<html lang="en">

<head>
  {{> 'partials/head' }}

  <meta name="thumbnail" content="{{config.DOMAIN}}{{claim.ThumbnailUrl}}">
  <meta name="description" content={{claim.DescriptionTxt}}>

  <meta property="og:site_name" content="Librarian">
  <meta property="og:url" content={{claim.Url}}>
  <meta property="og:title" content={{claim.Title}}>
  <meta property="og:image" content="{{config.DOMAIN}}{{claim.ThumbnailUrl}}">
  <meta property="og:description" content={{claim.DescriptionTxt}}>
  <meta property="og:type" content="video.other">

  <meta name="twitter:card" content="player">
  <meta name="twitter:url" content={{claim.Url}}>
  <meta name="twitter:title" content={{claim.Title}}>
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="{{config.DOMAIN}}{{claim.ThumbnailUrl}}">

  <link rel="stylesheet" href="/static/css/plyr.css" />
  <link rel="stylesheet" href="/static/css/video.css" />
  <link rel="stylesheet" href="/static/fonts/Material-Icons-Outlined.css" />

  <title>{{claim.Title}} - Librarian</title>
</head>

<body>
  {{> 'partials/header' }}

  <main>
    {{#unless document}}
    {{> 'partials/videoPlayer' }}

    <h2>{{claim.Title}}</h2>
    {{else}}
    <h2>{{claim.Title}}</h2>

    {{{document}}}
    {{/unless}}
    
    <div class="videoData">
      <div class="videoData__left videoData__side">
        <div class="videoMeta__wrapper">
          {{> 'partials/meta' }}

          {{> 'partials/description' }}
        </div>

        {{> 'partials/comments' }}
      </div>

      {{#unless document}}
      {{> 'partials/relVids'}}
      {{/unless}}
    </div>
  </main>

  {{> 'partials/footer' }}

  {{#unless nojs}}
  <script src="/static/js/plyr.js"></script>
  <script src="/static/js/comments.js"></script>
  <script>
    document.getElementById("nojs").remove();

    const player = new Plyr('#player');

    document.addEventListener('keydown', (event) => {
      switch (event.key) {
        case 'j':
          player.rewind(15);
          break;
        case 'l':
          player.forward(15);
          break;
      }
    });

    comments("{{claim.ClaimId}}", "{{claim.Channel.Id}}", "{{claim.Channel.Name}}", 1)

    function loadMoreBtn(page) {
      let loadMore = document.getElementById("loadMore");
      loadMore.addEventListener('click', () => {
        loadMore.remove()
        comments("{{claim.ClaimId}}", "{{claim.Channel.Id}}", "{{claim.Channel.Name}}", page + 1)
      })
    }
  </script>
  {{/unless}}
</body>

</html>